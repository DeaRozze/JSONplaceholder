<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>JSONPlaceholder API Demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      button {
        margin: 5px;
      }
      pre {
        background-color: #f4f4f4;
        padding: 10px;
        overflow-x: auto;
        max-height: 300px;
      }
      ul {
        background-color: #f9f9f9;
        padding: 10px;
        list-style-type: disc;
      }
    </style>
  </head>
  <body>
    <h1>–†–∞–±–æ—Ç–∞ —Å JSONPlaceholder</h1>

    <button onclick="getAllPosts()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã</button>
    <button onclick="getPostById()">–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç —Å ID = 1</button>
    <button onclick="createPost()">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</button>
    <button onclick="updatePost()">–û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç</button>
    <button onclick="deletePost()">–£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç</button>
    <button onclick="fetchAndShowTitles()">–ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø–æ—Å—Ç–æ–≤ (ID 1‚Äì5)</button>

    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h2>
    <pre id="output">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç...</pre>

    <h2>–ó–∞–≥–æ–ª–æ–≤–∫–∏:</h2>
    <ul id="titles"></ul>

    <script>
      const output = document.getElementById("output");
      const titlesList = document.getElementById("titles");

      function getAllPosts() {
        fetch("https://jsonplaceholder.typicode.com/posts")
          .then((res) => res.json())
          .then((data) => {
            output.textContent = JSON.stringify(data, null, 2);
          });
      }

      function getPostById() {
        fetch("https://jsonplaceholder.typicode.com/posts/1")
          .then((res) => res.json())
          .then((data) => {
            output.textContent = JSON.stringify(data, null, 2);
          });
      }

      function createPost() {
        fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            title: "–ù–æ–≤—ã–π –ø–æ—Å—Ç",
            body: "–≠—Ç–æ —Ç–µ–ª–æ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞.",
            userId: 1,
          }),
        })
          .then((res) => res.json())
          .then((data) => {
            output.textContent = JSON.stringify(data, null, 2);
          });
      }

      function updatePost() {
        fetch("https://jsonplaceholder.typicode.com/posts/1", {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            id: 1,
            title: "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
            body: "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Ç–µ–ª–æ –ø–æ—Å—Ç–∞.",
            userId: 1,
          }),
        })
          .then((res) => res.json())
          .then((data) => {
            output.textContent = JSON.stringify(data, null, 2);
          });
      }

      function deletePost() {
        fetch("https://jsonplaceholder.typicode.com/posts/1", {
          method: "DELETE",
        }).then((res) => {
          output.textContent = `–°—Ç–∞—Ç—É—Å —É–¥–∞–ª–µ–Ω–∏—è: ${res.status}`;
        });
      }

      // üîπ Promise.all –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
      function fetchMultiplePosts() {
        const ids = [1, 2, 3, 4, 5];
        const requests = ids.map((id) =>
          fetch(`https://jsonplaceholder.typicode.com/posts/${id}`).then(
            (res) => res.json()
          )
        );
        return Promise.all(requests);
      }

      function displayTitles(posts) {
        titlesList.innerHTML = ""; // –æ—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–π —Å–ø–∏—Å–æ–∫
        posts.forEach((post) => {
          const li = document.createElement("li");
          li.textContent = post.title;
          titlesList.appendChild(li);
        });
      }

      function fetchAndShowTitles() {
        fetchMultiplePosts()
          .then(displayTitles)
          .catch((err) => {
            output.textContent =
              "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤: " + err.message;
          });
      }
    </script>
  </body>
</html>
